<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mind Left Body Game</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="stylesheet" href="/Styles/tokens.css" />
  <link rel="stylesheet" href="/Styles/ui.css" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <style>
    .top-row {
      align-items: flex-start;
      gap: var(--space-4);
    }
    .panel.hero-panel,
    .panel.auth-panel,
    .panel.leaderboard-panel {
      min-height: 36px !important;
    }
    .panel.hero-panel {
      padding-top: 2px !important;
      padding-bottom: 2px !important;
    }
    .panel.leaderboard-panel .panel-body {
      max-height: 110px;
      overflow-y: auto;
    }
    #fixedHeader {
      padding-top: 0px;
      padding-bottom: 0px;
    }
    #fixedHeader .play-wrap {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      gap: 4px;
      margin: -6px 0 0 !important;
      min-height: 20px;
      width: 100%;
    }
    #fixedHeader #statusEl {
      margin-top: 0 !important;
    }
  </style>
</head>
<body>
  <header id="fixedHeader" style="position:fixed; top:0; left:0; width:100%; background:var(--color-bg, #fff); z-index:1000;">
    <div class="container header-inner">
      <div class="top-row">
        <section id="authPanel" class="panel auth-panel" style="flex:1; min-width:260px;">
          <div class="panel-head"><div class="tab-title">Sign In</div></div>
          <div class="panel-body">
            <div id="signInStatusEl" class="note" style="margin-bottom:8px;"></div>
            <div id="authLoginPanel" class="auth-login">
              <form id="authForm" class="auth-form">
                <div id="authInputs" style="display:block; margin-bottom:8px;">
                  <label for="authName" style="display:block; font-size:12px; color:#6b7280; margin-bottom:4px;">Username</label>
                  <input id="authName" class="input" type="text" placeholder="Choose a username" autocomplete="username">
                  <label for="authPass" style="display:block; font-size:12px; color:#6b7280; margin-bottom:4px;">Password</label>
                  <input id="authPass" class="input" type="password" placeholder="••••••••" autocomplete="current-password">
                </div>
                <button id="authContinueBtn" class="btn btn-primary btn-block" type="submit">Continue</button>
              </form>
            </div>
            <div id="authedPanel" class="auth-logged" style="margin-top:4px;">
              <div style="font-size:0.75rem; opacity:0.8; margin-bottom:2px;">Playing as:</div>
              <div id="authedUser" style="font-weight:600; margin-bottom:4px;">—</div>
              <div id="authedScore" style="font-size:0.8rem; margin-bottom:8px;">Score: 0</div>
              <button id="logoutBtn" class="btn btn-block" type="button">Logout</button>
            </div>
            <p id="scoreHint" class="note" style="display:none; margin-top:8px;">Sign in to save your score on the leaderboard.</p>
          </div>
        </section>

        <section class="panel hero-panel" id="heroPanel" style="flex:2; display:flex; align-items:center; justify-content:center;">
          <h1 id="heroTitle" style="margin:0; padding:8px;">
            <a href="/" style="color:inherit; text-decoration:none; cursor:pointer;">Mind Left Body Game</a>
          </h1>
        </section>

        <section class="panel leaderboard-panel" style="flex:1; min-width:260px;">
          <div class="panel-head"><div class="tab-title">Leaderboard</div></div>
          <div class="panel-body" id="leaderboardBody">
            <p class="note">No scores yet.</p>
          </div>
        </section>
      </div>

      <div class="play-wrap">
        <button id="playBtn" class="btn btn-primary" data-state="idle" aria-live="polite">
          <span class="label-default">Play</span>
          <span class="label-loading" hidden>Find a Jam</span>
          <span class="label-playing" hidden>
            <span class="transport" aria-hidden="true">⏯</span>
            <span class="time"><span id="elapsed">0:00</span> / <span id="duration">0:00</span></span>
          </span>
        </button>
        <button id="playAgainBtn" class="btn btn-secondary" style="margin-left:8px; display:none;">
          Play
        </button>
        <div id="statusEl" class="note"></div>
        <audio id="jamAudio" preload="auto" crossorigin="anonymous" style="display:none"></audio>
      </div>
    </div>
  </header>

  <main id="appMain" class="container app-main">
    <section class="panel years-panel" style="margin:var(--space-6) 0;">
      <h4 style="text-align:center; margin:0 var(--space-0) var(--space-4);">Choose a Year</h4>
      <div id="yearGrid" class="years years-guess"></div>
    </section>

    <section class="panel answer-panel" style="margin:var(--space-6) 0;">
      <div id="answerEl"></div>
      <ol id="trackList" style="padding-left:20px; margin-top:var(--space-4);"></ol>
    </section>

    <section id="bottom-show" class="panel" style="margin:var(--space-6) 0; display:none;">
      <div class="panel-head"><div class="tab-title">Now Playing</div></div>
      <div class="panel-body" id="bottom-show-body">
        <p class="note">Show details and setlist will appear here.</p>
      </div>
    </section>
  </main>

  <script src="/game.js"></script>
  <script src="/app-auth.js" defer></script>
</body>
</html>